@using System.Text
@using Asis.Ulasim.Models.Account
@using Asis.Ulasim.Controllers
@using Microsoft.AspNetCore.Mvc.Localization
@inject IHtmlLocalizer<HomeController> Localizer
@{
    ViewData["Title"] = "IndexTnj";
    Layout = "~/Views/Shared/_LayoutTnj.cshtml";
}
@{
    ApplicationUser _usersInfo = null;
    if (Context.User.Identity.Name != null)
    {
        _usersInfo = (from u in Context.User.Claims
                      select new ApplicationUser
                      {
                          UserId = Convert.ToInt32(Context.User.Claims.FirstOrDefault(c => c.Type == "UserId").Value),
                          UserName = Context.User.Claims.FirstOrDefault(c => c.Type == "UserName").Value,
                          FirstName = Context.User.Claims.FirstOrDefault(c => c.Type == "FirstName").Value,
                          LastName = Context.User.Claims.FirstOrDefault(c => c.Type == "LastName").Value,
                          UserEmail = Context.User.Claims.FirstOrDefault(c => c.Type == "UserEmail").Value,
                          IdentityNumber = Context.User.Claims.FirstOrDefault(c => c.Type == "IdentityNumber").Value,
                          UserMobile = Context.User.Claims.FirstOrDefault(c => c.Type == "UserMobile").Value,
                          UserPhoto = Encoding.ASCII.GetBytes(Context.User.Claims.FirstOrDefault(c => c.Type == "UserPhoto").Value)
                      }).FirstOrDefault();
        //}
    }
    else
    {
        @Url.Action("/Account/IndexTnj")
    }
}


<!--begin::Page Custom Styles(used by this page)-->
<link href="template/dist/assets/css/pages/wizard/wizard-1.css" rel="stylesheet" type="text/css" />
<!--end::Page Custom Styles-->
<!--begin::Entry-->
<div class="d-flex flex-column-fluid">
    <!--begin::Container-->
    <div class="container">
        <!--begin::Card-->
        <div class="card card-custom gutter-b">
            <!--begin::Body-->
            <div class="card-body p-0">
                <!--begin::Wizard-->
                <div class="wizard wizard-1" id="kt_user_settings" data-wizard-state="step-first" data-wizard-clickable="true">
                    <!--begin::Wizard Nav-->
                    <div class="wizard-nav border-bottom">
                        <div class="wizard-steps p-8 p-lg-10">
                            <div class="wizard-step" data-wizard-type="step" data-wizard-state="current" id="updateUserInfo">
                                <div class="wizard-label">
                                    <span class="svg-icon svg-icon-4x wizard-icon">
                                        <!--begin::Svg Icon | path:assets/media/svg/icons/Communication/Chat-check.svg-->
                                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                <rect x="0" y="0" width="24" height="24" />
                                                <path d="M4.875,20.75 C4.63541667,20.75 4.39583333,20.6541667 4.20416667,20.4625 L2.2875,18.5458333 C1.90416667,18.1625 1.90416667,17.5875 2.2875,17.2041667 C2.67083333,16.8208333 3.29375,16.8208333 3.62916667,17.2041667 L4.875,18.45 L8.0375,15.2875 C8.42083333,14.9041667 8.99583333,14.9041667 9.37916667,15.2875 C9.7625,15.6708333 9.7625,16.2458333 9.37916667,16.6291667 L5.54583333,20.4625 C5.35416667,20.6541667 5.11458333,20.75 4.875,20.75 Z" fill="#000000" fill-rule="nonzero" opacity="0.3" />
                                                <path d="M2,11.8650466 L2,6 C2,4.34314575 3.34314575,3 5,3 L19,3 C20.6568542,3 22,4.34314575 22,6 L22,15 C22,15.0032706 21.9999948,15.0065399 21.9999843,15.009808 L22.0249378,15 L22.0249378,19.5857864 C22.0249378,20.1380712 21.5772226,20.5857864 21.0249378,20.5857864 C20.7597213,20.5857864 20.5053674,20.4804296 20.317831,20.2928932 L18.0249378,18 L12.9835977,18 C12.7263047,14.0909841 9.47412135,11 5.5,11 C4.23590829,11 3.04485894,11.3127315 2,11.8650466 Z M6,7 C5.44771525,7 5,7.44771525 5,8 C5,8.55228475 5.44771525,9 6,9 L15,9 C15.5522847,9 16,8.55228475 16,8 C16,7.44771525 15.5522847,7 15,7 L6,7 Z" fill="#000000" />
                                            </g>
                                        </svg>
                                        <!--end::Svg Icon-->
                                    </span>
                                    <h3 class="wizard-title">User Information</h3>
                                </div>
                            </div>
                            <div class="wizard-step" data-wizard-type="step" id="changePassword">
                                <div class="wizard-label">
                                    <span class="svg-icon svg-icon-4x wizard-icon">
                                        <!--begin::Svg Icon | path:assets/media/svg/icons/Devices/Display1.svg-->
                                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                <rect x="0" y="0" width="24" height="24" />
                                                <path d="M11,20 L11,17 C11,16.4477153 11.4477153,16 12,16 C12.5522847,16 13,16.4477153 13,17 L13,20 L15.5,20 C15.7761424,20 16,20.2238576 16,20.5 C16,20.7761424 15.7761424,21 15.5,21 L8.5,21 C8.22385763,21 8,20.7761424 8,20.5 C8,20.2238576 8.22385763,20 8.5,20 L11,20 Z" fill="#000000" opacity="0.3" />
                                                <path d="M3,5 L21,5 C21.5522847,5 22,5.44771525 22,6 L22,16 C22,16.5522847 21.5522847,17 21,17 L3,17 C2.44771525,17 2,16.5522847 2,16 L2,6 C2,5.44771525 2.44771525,5 3,5 Z M4.5,8 C4.22385763,8 4,8.22385763 4,8.5 C4,8.77614237 4.22385763,9 4.5,9 L13.5,9 C13.7761424,9 14,8.77614237 14,8.5 C14,8.22385763 13.7761424,8 13.5,8 L4.5,8 Z M4.5,10 C4.22385763,10 4,10.2238576 4,10.5 C4,10.7761424 4.22385763,11 4.5,11 L7.5,11 C7.77614237,11 8,10.7761424 8,10.5 C8,10.2238576 7.77614237,10 7.5,10 L4.5,10 Z" fill="#000000" />
                                            </g>
                                        </svg>
                                        <!--end::Svg Icon-->
                                    </span>
                                    <h3 class="wizard-title">Change Password</h3>
                                </div>
                            </div>
                            <!--<div class="wizard-step" data-wizard-type="step" id="uploadPhoto">
                                <div class="wizard-label">
                                    <span class="svg-icon svg-icon-4x wizard-icon">-->
                            <!--begin::Svg Icon | path:assets/media/svg/icons/Devices/Display1.svg-->
                            <!--<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                    <rect x="0" y="0" width="24" height="24" />
                                    <path d="M11,20 L11,17 C11,16.4477153 11.4477153,16 12,16 C12.5522847,16 13,16.4477153 13,17 L13,20 L15.5,20 C15.7761424,20 16,20.2238576 16,20.5 C16,20.7761424 15.7761424,21 15.5,21 L8.5,21 C8.22385763,21 8,20.7761424 8,20.5 C8,20.2238576 8.22385763,20 8.5,20 L11,20 Z" fill="#000000" opacity="0.3" />
                                    <path d="M3,5 L21,5 C21.5522847,5 22,5.44771525 22,6 L22,16 C22,16.5522847 21.5522847,17 21,17 L3,17 C2.44771525,17 2,16.5522847 2,16 L2,6 C2,5.44771525 2.44771525,5 3,5 Z M4.5,8 C4.22385763,8 4,8.22385763 4,8.5 C4,8.77614237 4.22385763,9 4.5,9 L13.5,9 C13.7761424,9 14,8.77614237 14,8.5 C14,8.22385763 13.7761424,8 13.5,8 L4.5,8 Z M4.5,10 C4.22385763,10 4,10.2238576 4,10.5 C4,10.7761424 4.22385763,11 4.5,11 L7.5,11 C7.77614237,11 8,10.7761424 8,10.5 C8,10.2238576 7.77614237,10 7.5,10 L4.5,10 Z" fill="#000000" />
                                </g>
                            </svg>-->
                            <!--end::Svg Icon-->
                            <!--</span>
                                    <h3 class="wizard-title">3. Upload Photo</h3>
                                </div>
                            </div>-->
                        </div>
                    </div>
                    <!--end::Wizard Nav-->
                    <!--begin::Wizard Body-->
                    <div class="row justify-content-center my-10 px-8 my-lg-15 px-lg-10">
                        <div class="col-xl-12 col-xxl-7">
                            <!--begin::Form Wizard Form-->
                            <form class="form" id="kt_user_settings_form">
                                <!--begin::Form Wizard Step 1-->
                                <div class="pb-5" data-wizard-type="step-content" data-wizard-state="current">
                                    <div class="row">
                                        <div class="col-xl-12">
                                            <div class="form-group row">
                                                <label class="col-xl-3 col-lg-3 col-form-label">User Name*</label>
                                                <div class="col-lg-9 col-xl-9">
                                                    <input class="form-control form-control-lg form-control-solid" id="username" name="username" type="text" placeholder="Didier" value="@_usersInfo.UserName" />
                                                    <span class="form-text" style="color:red !important;display:none;" id="usernamealert">User Name is required</span>
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label class="col-xl-3 col-lg-3 col-form-label">First Name*</label>
                                                <div class="col-lg-9 col-xl-9">
                                                    <input class="form-control form-control-lg form-control-solid" id="firstname" name="firstname" type="text" placeholder="Didier" value="@_usersInfo.FirstName" />
                                                    <span class="form-text" style="color:red !important;display:none" id="firstnamealert">First Name is required</span>
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label class="col-xl-3 col-lg-3 col-form-label">Last Name*</label>
                                                <div class="col-lg-9 col-xl-9">
                                                    <input class="form-control form-control-lg form-control-solid" id="lastname" name="lastname" type="text" placeholder="Drogba" value="@_usersInfo.LastName" />
                                                    <span class="form-text" style="color:red !important;display:none;" id="lastnamealert">Last Name is required</span>
                                                </div>
                                            </div>

                                            <div class="form-group row">
                                                <label class="col-xl-3 col-lg-3 col-form-label">Identity Number</label>
                                                <div class="col-lg-9 col-xl-9">
                                                    <input maxlength="11" class="form-control form-control-lg form-control-solid" id="identitynumber" name="identitynumber" type="text" placeholder="12345678910" value="@_usersInfo.IdentityNumber" />
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label class="col-xl-3 col-lg-3 col-form-label">Telephone</label>
                                                <div class="col-lg-9 col-xl-9">
                                                    <div class="input-group input-group-lg input-group-solid">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                <i class="la la-phone"></i>
                                                            </span>
                                                        </div>
                                                        @*<input type="text" class="form-control form-control-lg form-control-solid" id="phone" name="phone" value="" />*@
                                                        <input id="phone" name="phone" type="text" maxlength="14" placeholder="(XXX) XXX-XXXX" class="form-control form-control-lg form-control-solid phone-number" value="@_usersInfo.UserMobile" />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label class="col-xl-3 col-lg-3 col-form-label">Email*</label>
                                                <div class="col-lg-9 col-xl-9">
                                                    <div class="input-group input-group-lg input-group-solid">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                <i class="la la-at"></i>
                                                            </span>
                                                        </div>
                                                        <input type="text" class="form-control form-control-lg form-control-solid" id="email" name="email" placeholder="didier.drogba@gmail.com" value="@_usersInfo.UserEmail" />
                                                    </div>
                                                    <span class="form-text" style="color:red !important;display:none;" id="emailalert">Email is required</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--end::Form Wizard Step 1-->
                                <!--begin::Form Wizard Step 2-->
                                <div class="pb-5" data-wizard-type="step-content">
                                    <div class="row">
                                        <div class="col-xl-12">
                                            <div class="row">
                                                <div class="col-xl-12">
                                                    <div class="form-group row">
                                                        <label class="col-xl-3 col-lg-3 col-form-label">User Name</label>
                                                        <div class="col-lg-9 col-xl-9">
                                                            <input class="form-control form-control-lg form-control-solid" disabled="disabled" id="usernameupdate" name="usernameupdate" type="text" placeholder="Didier" value="@_usersInfo.UserName" />
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label class="col-xl-3 col-lg-3 col-form-label">New Password*</label>
                                                        <div class="col-lg-9 col-xl-9">
                                                            <input maxlength="8" class="form-control form-control-lg form-control-solid" id="newpassword" name="newpassword" type="password" value="" />
                                                            <span class="form-text" style="color:red !important;display:none;" id="newpasswordalert">A minimum of 6 and a maximum of 8 characters and one lowercase and one uppercase letter must be entered.</span>
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label class="col-xl-3 col-lg-3 col-form-label">Email</label>
                                                        <div class="col-lg-9 col-xl-9">
                                                            <div class="input-group input-group-lg input-group-solid">
                                                                <div class="input-group-prepend">
                                                                    <span class="input-group-text">
                                                                        <i class="la la-at"></i>
                                                                    </span>
                                                                </div>
                                                                <input type="text" disabled="disabled" class="form-control form-control-lg form-control-solid" id="emailupdate" name="emailupdate" placeholder="didier.drogba@gmail.com" value="@_usersInfo.UserEmail" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--end::Form Wizard Step 2-->
                                <!--begin::Form Wizard Step 3-->
                                @*<div class="pb-5" data-wizard-type="step-content">
                                        <div class="row">
                                            <div class="col-xl-12">
                                                <div class="row">
                                                    <div class="col-xl-12">
                                                        <div class="form-group row">
                                                            <label class="col-xl-3 col-lg-3 col-form-label">User Name</label>
                                                            <div class="col-lg-9 col-xl-9">
                                                                <input class="form-control form-control-lg form-control-solid" disabled="disabled" id="usernameedit" name="usernameedit" type="text" placeholder="Didier" value="" />
                                                                <span class="form-text" style="color:red !important;display:none;" id="usernameeditalert">User Name is required</span>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label class="col-xl-3 col-lg-3 col-form-label">Last Name</label>
                                                            <div class="col-lg-9 col-xl-9">
                                                                <input class="form-control form-control-lg form-control-solid" id="lastnameedit" name="lastnameedit" type="text" placeholder="Drogba" value="" />
                                                                <span class="form-text" style="color:red !important;display:none;" id="lastnameeditalert">User Name is required</span>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label class="col-xl-3 col-lg-3 col-form-label">Email</label>
                                                            <div class="col-lg-9 col-xl-9">
                                                                <div class="input-group input-group-lg input-group-solid">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">
                                                                            <i class="la la-at"></i>
                                                                        </span>
                                                                    </div>
                                                                    <input type="text" class="form-control form-control-lg form-control-solid" id="emailedit" name="emailedit" placeholder="didier.drogba@gmail.com" />
                                                                </div>
                                                                <span class="form-text" style="color:red !important;display:none;" id="emaileditalert">Email is required</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>*@
                                <!--end::Form Wizard Step 3-->
                                <!--begin::Wizard Actions-->
                                <div class="d-flex justify-content-between border-top pt-10">
                                    <div class="mr-2"></div>
                                    <div>
                                        <div id="updateUserInfoDiv" >
                                            <button type="button" onclick="UpdateUserInfo();" class="btn btn-warning font-weight-bolder text-uppercase px-9 py-4" id="userInfoUpdateBtn">UPDATE</button>
                                        </div>
                                        <div id="changePasswordDiv" style="display:none;">
                                            <button type="button" onclick="ChangePassword();" class="btn btn-warning font-weight-bolder text-uppercase px-9 py-4" id="userChangePasswordBtn">RESET PASSWORD</button>
                                        </div>
                                    </div>
                                </div>
                                <!--end::Wizard Actions-->
                            </form>
                            <!--end::Form Wizard Form-->
                        </div>
                    </div>
                    <!--end::Wizard Body-->
                </div>
                <!--end::Wizard-->
            </div>
            <!--end::Body-->
        </div>
        <!--end::Card-->
    </div>
    <!--end::Container-->
</div>
<!--end::Entry-->
<div id="dvMessage"></div>
@section Scripts {
    <script src="~/js/UserSettings/UserSettings.js"></script>
}
